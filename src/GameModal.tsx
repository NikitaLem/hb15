import { FC, memo, useEffect, useState } from "react";
import Modal, { Styles } from "react-modal";

import krolik from "../public/krolik.jpg";
import svecha from "../public/svecha.jpg";
import wheel from "../public/wheel.png";
import solntse from "../public/solntse.jpg";
import kapusta from "../public/kapusta.jpg";
import glasses from "../public/glasses.png";
import vopros from "../public/vopros.jpg";
import veter from "../public/veter.jpg";
import trava from "../public/trava.jpg";

Modal.setAppElement("#root");

const customStyles: Styles = {
  content: {
    maxWidth: 700,
    top: "50%",
    left: "50%",
    right: "auto",
    bottom: "auto",
    marginRight: "-50%",
    transform: "translate(-50%, -50%)",
    color: "black",
    display: "flex",
    flexDirection: "column",
    gap: "8px",
  },
};

interface GameModalProps {
  isOver: boolean;
  isWin: boolean;
  stage: number;
}

const refresh = () => location.reload();

const script = [
  [
    "**** —Ä–∞—Å—Å—Ç–µ–ª–∏–ª–∞ –Ω–∞ –ø–æ–ª—è–Ω–µ —Å–∫–∞—Ç–µ—Ä—Ç—å –∏ –ø–æ—Å—Ç–∞–≤–∏–ª–∞ –Ω–∞ –Ω–µ–µ –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π —Ç–æ—Ä—Ç.",
    `"–£—Ö! –ö–∞–∫ –∂–µ —è —Å–µ–π—á–∞—Å –Ω–∞–µ–º—Å—è!" - —Å–∫–∞–∑–∞–ª–∞ ****.`,
    "–ù–æ –∏–∑ –Ω–∏–æ—Ç–∫—É–¥–∞ –ø–æ—è–≤–∏–ª—Å—è –∫—Ä–æ–ª–∏–∫, —Å—Ö–≤–∞—Ç–∏–ª —Ç–æ—Ä—Ç –∏ –ø—Ä—ã–≥–Ω—É–ª –≤ –Ω–æ—Ä—É!",
    "**** —Å–∏–ª—å–Ω–æ —É–¥–∏–≤–∏–ª–∞—Å—å, –∞ –ø–æ—Ç–æ–º –µ—â–µ —Å–∏–ª—å–Ω–µ–µ —Ä–∞–∑–æ–ª–∏–ª–∞—Å—å –∏ –ø—Ä—ã–≥–Ω—É–ª–∞ –∑–∞ –Ω–∏–º.",
  ],
  [
    "**** –Ω–∞—à–ª–∞ —Å–≤–µ—á–∫—É - –æ–¥–Ω—É –∏–∑ —Ç–µ—Ö, —á—Ç–æ —É–∫—Ä–∞—à–∞–ª–∏ —Ç–æ—Ä—Ç.",
    "–°–≤–µ—á–∫–∞ –≤—Å–µ –µ—â–µ –≥–æ—Ä–µ–ª–∞.",
    "–ü–æ—ç—Ç–æ–º—É **** –∑–∞–¥—É–ª–∞ –µ–µ!",
    "–ò—Å—á–µ–∑–∞—é—â–∏–π –æ–≥–æ–Ω–µ–∫ –ø–æ–∂–µ–ª–∞–ª **** —Ä–∞–¥–æ—Å—Ç–∏ –∫—É–¥–∞ –±—ã –æ–Ω–∏ –Ω–∏ —à–ª–∞",
  ],
  [
    "–í–æ—Ç –∏ –µ—â–µ –æ–¥–Ω–∞ —Å–≤–µ—á–∫–∞ - –≤–∏–¥–∏–º–æ –∫—Ä–æ–ª–∏–∫ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –∏—Ö —Ä–∞–∑–±—Ä–æ—Å–∞–ª!",
    "**** –¥—É–Ω—É–ª–∞ –∏ —Å–≤–µ—á–∞ –ø–æ–≥–∞—Å–ª–∞.",
    "–≠—Ç–∞ —Å–≤–µ—á–∫–∞ –ø–æ–∂–µ–ª–∞–ª–∞ –ø—Ä–∏—è—Ç–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ –æ—Ç —Å—É–¥—å–±—ã.",
  ],
  [
    "–î–µ—Ä–∂–∞ –≤ —Ä—É–∫–µ –æ—á–µ—Ä–µ–¥–Ω—É—é —Å–≤–µ—á—É, **** –ø–æ–¥—É–º–∞–ª–∞:",
    `"–ö–∞–∫ –∂–µ —è –Ω–∞–π–¥—É –¥–æ—Ä–æ–≥—É –Ω–∞–≤–µ—Ä—Ö, –µ—Å–ª–∏ –±—É–¥—É –∏ –¥–∞–ª—å—à–µ –∑–∞–¥—É–≤–∞—Ç—å —Å–≤–µ—á–∏?"`,
    `"–®—É—É—É—É—É—É—Ö!" - –ø–ª–∞–º—è –ø–æ–≥–∞—Å–ª–æ.`,
    `"–Ø –ø—Ä–æ—Å—Ç–æ –º–∞–ª–µ–Ω—å–∫–∞—è —Å–≤–µ—á–∫–∞ –∏ –æ—Ç –º–µ–Ω—è –º–∞–ª–æ —Ç–µ–ø–ª–∞, –Ω–æ –ø—É—Å—Ç—å —É —Ç–µ–±—è –≤—Å–µ–≥–¥–∞ —Å–≤–µ—Ç–∏—Ç –±–æ–ª—å—à–æ–µ —Ç–µ–ø–ª–æ–µ —Å–æ–ª–Ω—Ü–µ!"`,
  ],
  [
    "–í–æ—Ç —Ç–∞–∫ –≤–æ—Ç –∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –∑–∞–¥—É–≤–∞—Ç—å —Å–≤–µ—á–∏ –Ω–∞ —Ç–æ—Ä—Ç–µ - –Ω–µ—É–¥–æ–±–Ω–æ!",
    "–°–≤–µ—á–∏ –≥–∞—Å–Ω—É—Ç, –∞ –≤ –Ω–æ—Ä–µ –Ω–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–µ–º–Ω–µ–µ.",
    `"–ó–Ω–∞–µ—à—å, —ç—Ç–æ—Ç —Ç–æ—Ä—Ç –±—ã–ª –æ—á–µ–Ω—å –≤–∫—É—Å–Ω—ã–º! –ù–æ –∫—É—à–∞–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –≤–∫—É—Å–Ω–æ –Ω–µ —Ç–æ–ª—å–∫–æ –≤ —Ç–∞–∫–∏–µ –¥–Ω–∏, —Ö–æ—Ä–æ—à–æ?"`,
  ],
  [
    "–°—Ç—Ä–∞–Ω–Ω–æ, —á—Ç–æ —Ü–≤–µ—Ç –≤–æ–∫—Ä—É–≥ –º–µ–Ω—è–µ—Ç—Å—è —Å –∫–∞–∂–¥–æ–π —Å–≤–µ—á–æ–π.",
    `"–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏ - —ç—Ç–æ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ –≤ –Ω–∞—à–µ–π –∂–∏–∑–Ω–∏. –ü–æ—ç—Ç–æ–º—É –ø—É—Å—Ç—å —É —Ç–µ–±—è –æ–Ω–∏ –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º–∏."`,
    `"–û–π-–æ–π, –∫–∞–∫–∞—è —É–º–Ω–∞—è —Å–≤–µ—á–∫–∞ –ø–æ–ø–∞–ª–∞—Å—å!"`,
  ],
  [
    `"–ö–æ—Ç–æ—Ä—ã–π —Ä–∞–∑ —Ç—ã —É–∂–µ –ø—ã—Ç–∞–µ—à—å—Å—è –¥–æ–≥–Ω–∞—Ç—å –∫—Ä–æ–ª–∏–∫–∞? –û—Å—Ç–∞–≤–∞–π—Å—è —Ç–∞–∫–æ–π –∂–µ —É–ø–æ—Ä–Ω–æ–π, ****!"`,
    "–¢–∞–∫ –ª–∏ –≤–∞–∂–µ–Ω —Ç–æ—Ä—Ç–∏–∫, —á—Ç–æ–±—ã –ª–µ–∑—Ç—å –≤ —Ç–∞–∫—É—é –¥–∞–ª—å?",
    `"–Ø —Å —ä –µ –ª –∞ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–≤–µ—á–µ–π! –¢–µ–ø–µ—Ä—å –¥–∞–∂–µ —Ñ–æ–Ω –æ—Ç –∫–∞—Ä—Ç–∏–Ω–æ–∫ –≤–∏–¥–Ω–æ!`,
  ],
  [
    "**** —É–∂–µ —É—Å—Ç–∞–ª–∞ –∑–∞–¥—É–≤–∞—Ç—å —Å–≤–µ—á–∏ - —Å–∫–æ—Ä–æ —É –Ω–µ–µ –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤–æ–∑–¥—É—Ö–∞, —á—Ç–æ–±—ã –∏—Ö –∑–∞–¥—É–≤–∞—Ç—å.",
    `"–ú–æ–π –¥–æ–ª–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å —Ç–µ–±—è: –≤—Å–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å–≤–µ—á–∏ –æ—á–µ–Ω—å —Å—Ç—Ä–∞–Ω–Ω—ã–µ, –Ω–æ –ø–æ–º–Ω–∏ –æ —Ç–æ—Ä—Ç–∏–∫–µ!"`,
  ],
  [
    "–í–∞—Ä–∫–∞–ª–æ—Å—å. –•–ª–∏–≤–∫–∏–µ —à–æ—Ä—å–∫–∏",
    "–ü—ã—Ä—è–ª–∏—Å—å –ø–æ –Ω–∞–≤–µ",
    "–ò —Ö—Ä—é–∫–æ—Ç–∞–ª–∏ –∑–µ–ª—é–∫–∏",
    "–ö–∞–∫ –º—é–º–∑–∏–∫–∏ –≤ –º–æ–≤–µ.",
  ],
  [
    "–û, –±–æ–π—Å—è –ë–∞—Ä–º–∞–≥–ª–æ—Ç–∞, ****!",
    "–û–Ω —Ç–∞–∫ —Å–≤–∏—Ä–ª–µ–ø –∏ –¥–∏–∫!",
    "–ê –≤ –≥–ª—É—à–µ —Ä—ã–º–∏—Ç –∏—Å–ø–æ–ª–∏–Ω ‚Äî",
    "–ó–ª–æ–ø–∞—Å—Ç–Ω—ã–π –ë—Ä–∞–Ω–¥–∞—à–º—ã–≥!",
  ],
  [
    "**** –ø–æ–¥–Ω—è–ª–∞ –º–µ—á –≤–æ—Ä–ø–∞–ª –∏ —â–∏—Ç,",
    "–í—ã—Å–æ–∫–∏—Ö –ø–æ–ª–æ–Ω–∞ –¥—É–º.",
    "–í –≥–ª—É—â–æ–±—É –ø—É—Ç—å –µ–µ –ª–µ–∂–∏—Ç",
    "–ü–æ–¥ –¥–µ—Ä–µ–≤–æ –¢—É–º—Ç—É–º.",
  ],
  [
    "–°—Ç–∞–ª–∞ –ø–æ–¥ –¥–µ—Ä–µ–≤–æ –∏ –∂–¥—ë—Ç.",
    "–ò –≤–¥—Ä—É–≥ –≥—Ä–∞–∞—Ö–Ω—É–ª –≥—Ä–æ–º ‚Äî",
    "–õ–µ—Ç–∏—Ç —É–∂–∞—Å–Ω—ã–π –ë–∞—Ä–º–∞–≥–ª–æ—Ç",
    "–ò –ø—ã–ª–∫–∞–µ—Ç –æ–≥–Ω—ë–º!",
  ],
  [
    "–†–∞–∑-–¥–≤–∞, —Ä–∞–∑-–¥–≤–∞! –ì–æ—Ä–∏—Ç —Ç—Ä–∞–≤–∞,",
    "–í–∑—ã-–≤–∑—ã ‚Äî —Å—Ç—Ä–∏–∂–∞–µ—Ç –º–µ—á,",
    "–£–≤–∞! –£–≤–∞! –ò –≥–æ–ª–æ–≤–∞",
    "–ë–∞—Ä–∞–±–∞—Ä–¥–∞–µ—Ç —Å –ø–ª–µ—á!",
  ],
  [
    "–í–∞—Ä–∫–∞–ª–æ—Å—å. –•–ª–∏–≤–∫–∏–µ —à–æ—Ä—å–∫–∏",
    "–ü—ã—Ä—è–ª–∏—Å—å –ø–æ –Ω–∞–≤–µ",
    "–ò —Ö—Ä—é–∫–æ—Ç–∞–ª–∏ –∑–µ–ª—é–∫–∏",
    "–ö–∞–∫ –º—é–º–∑–∏–∫–∏ –≤ –º–æ–≤–µ.",
  ],
];

const winScript = [
  "**** –¥–æ–±—Ä–∞–ª–∞—Å—å –¥–æ —Å–∞–º–æ–≥–æ –¥–Ω–∞ –∫—Ä–æ–ª–∏—á—å–µ–π –Ω–æ—Ä—ã.",
  "–¢–∞–º –æ–Ω–∞ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∞ —Ç–æ–≥–æ —Å–∞–º–æ–≥–æ –∫—Ä–æ–ª–∏–∫–∞, —á—Ç–æ —Å—Ç–∞—â–∏–ª –µ–µ —Ç–æ—Ä—Ç.",
  "–ù–æ –∫—Ä–æ–ª–∏–∫ —Å–∫–∞–∑–∞–ª, —á—Ç–æ –æ–Ω –Ω–µ –±—Ä–∞–ª –Ω–∏–∫–∞–∫–æ–≥–æ —Ç–æ—Ä—Ç–∏–∫–∞.",
  "E—â–µ –æ–Ω —Å–∫–∞–∑–∞–ª, —á—Ç–æ –≤—Å–µ–≥–¥–∞ —Ä–∞–¥ –≤–∏–¥–µ—Ç—å ****, –∞ –µ–µ —Ç–æ—Ä—Ç–∏–∫ –≤—Å–µ–≥–¥–∞ –±—ã–ª —Ç–∞–º –Ω–∞–≤–µ—Ä—Ö—É.",
  "–ü–æ—Ç–æ–º –æ–Ω –ø–æ—á–µc–∞–ª –ø—É—à–∏—Å—Ç—ã–º–∏ —É—à–∞–º–∏ –∏ **** –ø—Ä–æ—Å–Ω—É–ª–∞—Å—å.",
];

const pics = [krolik, svecha, wheel, solntse, kapusta, glasses, vopros, veter];

export const GameModal: FC<GameModalProps> = memo(
  ({ isOver, isWin, stage }) => {
    const [open, setOpen] = useState(true);

    const handleModalClose = () => {
      setOpen(false);
    };

    useEffect(() => {
      if (isOver || isWin) {
        setOpen(true);
      }
    }, [isOver, isWin]);

    useEffect(() => {
      if (stage) {
        setOpen(true);
      }
    }, [stage]);

    return (
      <Modal isOpen={open} style={customStyles}>
        {isWin ? (
          <div
            style={{ display: "flex", flexDirection: "column", gap: "12px" }}
          >
            {winScript.map((t, i) => (
              <div key={i}>{t}</div>
            ))}
            <img src={krolik} height={150} style={{ objectFit: "contain" }} />
          </div>
        ) : !isOver ? (
          <div
            style={{ display: "flex", flexDirection: "column", gap: "12px" }}
          >
            {script[stage]?.map((t, i) => <div key={i}>{t}</div>) ??
              "–û–π-–æ–π! –°–∫–æ–ª—å–∫–æ –µ—â–µ –∏–¥—Ç–∏?"}
            {pics[stage] && (
              <img
                src={pics[stage]}
                height={150}
                style={{ objectFit: "contain" }}
              />
            )}
          </div>
        ) : (
          <div
            style={{ display: "flex", flexDirection: "column", gap: "12px" }}
          >
            <div>**** –ø—Ä–æ—Å–Ω—É–ª–∞—Å—å - —ç—Ç–æ –±—ã–ª –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä–∞—à–Ω—ã–π —Å–æ–Ω!</div>
            <img src={trava} height={150} style={{ objectFit: "contain" }} />
          </div>
        )}
        {isWin ? null : !isOver ? (
          <button onClick={handleModalClose}>üéÇ</button>
        ) : (
          <button onClick={refresh}>üéà</button>
        )}
      </Modal>
    );
  }
);
